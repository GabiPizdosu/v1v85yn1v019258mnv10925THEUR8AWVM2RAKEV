local car = game.Workspace.Car -- Replace with a reference to your car model
local roadColor = Color3.new(0, 0, 0) -- Replace with the color of your road
local speed = 10 -- Adjust the speed as needed

-- Function to check if a position is on the road
local function isOnRoad(position)
    local region = Region3.new(position - Vector3.new(1, 0, 1), position + Vector3.new(1, 0, 1))
    local part = workspace:FindPartOnRayWithIgnoreList(Ray.new(position, Vector3.new(0, -1, 0)), {car})
    
    if part and part.BrickColor == BrickColor.new(roadColor) then
        return true
    else
        return false
    end
end

-- Function to move the car based on keyboard input
local function moveCar()
    local userInputService = game:GetService("UserInputService")
    local player = game.Players.LocalPlayer
    local character = player.Character or player.CharacterAdded:Wait()

    userInputService.InputBegan:Connect(function(input)
        if input.KeyCode == Enum.KeyCode.W and isOnRoad(car.Position + car.CFrame.LookVector * 5) then
            car:SetPrimaryPartCFrame(car.CFrame * CFrame.new(0, 0, -speed))
        elseif input.KeyCode == Enum.KeyCode.S and isOnRoad(car.Position - car.CFrame.LookVector * 5) then
            car:SetPrimaryPartCFrame(car.CFrame * CFrame.new(0, 0, speed))
        elseif input.KeyCode == Enum.KeyCode.A then
            car:SetPrimaryPartCFrame(car.CFrame * CFrame.Angles(0, -math.rad(5), 0))
        elseif input.KeyCode == Enum.KeyCode.D then
            car:SetPrimaryPartCFrame(car.CFrame * CFrame.Angles(0, math.rad(5), 0))
        end
    end)
end

-- Start moving the car based on keyboard input
moveCar()
